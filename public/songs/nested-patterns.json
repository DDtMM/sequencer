{
  "$schema": "./song.schema.json",
  "title": "Nested Patterns Demo",
  "bpm": 120,
  "beatsPerBar": 4,
  "loop": true,
  "masterChannel": {
    "id": "master",
    "effects": []
  },
  "channels": [
    {
      "id": "drums",
      "pan": -0.1,
      "effects": []
    },
    {
      "id": "melody",
      "pan": 0.1,
      "effects": [
        {
          "name": "delay",
          "delayTime": "8n",
          "feedback": 0.3
        }
      ]
    }
  ],
  "instruments": [
    {
      "id": "kick",
      "generators": [
        {
          "type": "oscillator",
          "oscillator": {
            "type": "sine"
          },
          "envelope": {
            "a": 0.001,
            "d": 0.2,
            "s": 0,
            "r": 0.01
          }
        }
      ]
    },
    {
      "id": "hihat",
      "generators": [
        {
          "type": "oscillator",
          "oscillator": {
            "type": "square"
          },
          "envelope": {
            "a": 0.001,
            "d": 0.05,
            "s": 0,
            "r": 0.01
          }
        }
      ]
    },
    {
      "id": "synth",
      "generators": [
        {
          "type": "oscillator",
          "oscillator": {
            "type": "triangle"
          },
          "envelope": {
            "a": 0.25,
            "d": 0.1,
            "s": 1,
            "r": 1
          }
        }
      ]
    }
  ],
  "patterns": [
    {
      "id": "kick-hihat-combo",
      "bars": 1,
      "events": [
        {
          "type": "NoteOn",
          "beat": 0,
          "channelId": "drums",
          "instrumentId": "kick",
          "note": "C1",
          "velocity": 1
        },
        {
          "type": "NoteOff",
          "beat": 0.25,
          "channelId": "drums",
          "instrumentId": "kick",
          "note": "C1",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 0.5,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.6
        },
        {
          "type": "NoteOff",
          "beat": 0.625,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 2,
          "channelId": "drums",
          "instrumentId": "kick",
          "note": "C1",
          "velocity": 1
        },
        {
          "type": "NoteOff",
          "beat": 2.25,
          "channelId": "drums",
          "instrumentId": "kick",
          "note": "C1",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 2.5,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.6
        },
        {
          "type": "NoteOff",
          "beat": 2.625,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.5
        }
      ]
    },
    {
      "id": "hihat-fill",
      "bars": 0.5,
      "events": [
        {
          "type": "NoteOn",
          "beat": 0,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.8
        },
        {
          "type": "NoteOff",
          "beat": 0.125,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 0.5,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.6
        },
        {
          "type": "NoteOff",
          "beat": 0.625,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 1,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.8
        },
        {
          "type": "NoteOff",
          "beat": 1.125,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 1.5,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.9
        },
        {
          "type": "NoteOff",
          "beat": 1.625,
          "channelId": "drums",
          "instrumentId": "hihat",
          "note": "F#5",
          "velocity": 0.5
        }
      ]
    },
    {
      "id": "drum-pattern",
      "bars": 4,
      "events": [
        {
          "type": "PatternOn",
          "beat": 0,
          "patternId": "kick-hihat-combo"
        },
        {
          "type": "PatternOn",
          "beat": 4,
          "patternId": "kick-hihat-combo"
        },
        {
          "type": "PatternOn",
          "beat": 8,
          "patternId": "kick-hihat-combo"
        },
        {
          "type": "PatternOn",
          "beat": 12,
          "patternId": "kick-hihat-combo"
        },
        {
          "type": "PatternOn",
          "beat": 14,
          "patternId": "hihat-fill"
        }
      ]
    },
    {
      "id": "melody-pattern",
      "bars": 4,
      "events": [
        {
          "type": "NoteOn",
          "beat": 0,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "C4",
          "velocity": 0.7
        },
        {
          "type": "NoteOff",
          "beat": 1,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "C4",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 2,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "E4",
          "velocity": 0.7
        },
        {
          "type": "NoteOff",
          "beat": 3,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "E4",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 4,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "G4",
          "velocity": 0.7
        },
        {
          "type": "NoteOff",
          "beat": 5,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "G4",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 6,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "E4",
          "velocity": 0.7
        },
        {
          "type": "NoteOff",
          "beat": 7,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "E4",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 8,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "D4",
          "velocity": 0.7
        },
        {
          "type": "NoteOff",
          "beat": 9,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "D4",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 10,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "F4",
          "velocity": 0.7
        },
        {
          "type": "NoteOff",
          "beat": 11,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "F4",
          "velocity": 0.5
        },
        {
          "type": "NoteOn",
          "beat": 12,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "A4",
          "velocity": 0.8
        },
        {
          "type": "NoteOff",
          "beat": 14,
          "channelId": "melody",
          "instrumentId": "synth",
          "note": "A4",
          "velocity": 0.5
        }
      ]
    }
  ],
  "sequence": [
    {
      "patternId": "drum-pattern",
      "beat": 0
    },
    {
      "patternId": "melody-pattern",
      "beat": 0
    }
  ]
}
